<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Error</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&family=Philosopher:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Philosopher', sans-serif;
            background: linear-gradient(135deg, #0a0015 0%, #1a0a2e 50%, #0a0015 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #e0d0ff;
            overflow-x: hidden;
            overflow-y: hidden;
            position: relative;
        }

        /* Floating shadow particles */
        @keyframes shadow-drift {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            90% {
                opacity: 0.2;
            }
            100% {
                transform: translateY(-100px) translateX(60px) rotate(180deg);
                opacity: 0;
            }
        }

        .shadow-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #4a1a6e, transparent);
            border-radius: 50%;
            opacity: 0;
            animation: shadow-drift 15s infinite ease-in-out;
            box-shadow: 0 0 10px #4a1a6e;
        }

        /* Pulsing dark glow */
        @keyframes dark-pulse {
            0%, 100% { box-shadow: 0 0 40px rgba(74, 26, 110, 0.4); }
            50% { box-shadow: 0 0 80px rgba(74, 26, 110, 0.7); }
        }

        .error-container {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 15px;
            max-width: 900px;
            width: 95%;
            max-height: 95vh;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .shar-box {
            background: rgba(15, 5, 25, 0.92);
            border: 4px solid #4a1a6e;
            border-radius: 8px;
            padding: 45px 20px 20px 20px;
            box-shadow: 0 0 60px rgba(74, 26, 110, 0.6),
                        inset 0 0 40px rgba(0, 0, 0, 0.8),
                        0 0 100px rgba(74, 26, 110, 0.3);
            position: relative;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
            animation: dark-pulse 4s ease-in-out infinite;
        }

        .shar-box::before {
            content: 'ðŸŒ‘ LADY SHAR\'S EMBRACE ðŸŒ‘';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #4a1a6e, #2d1047);
            color: #d0b0ff;
            padding: 8px 18px;
            font-weight: 900;
            font-size: 12px;
            letter-spacing: 3px;
            border: 3px solid #2d1047;
            border-radius: 5px;
            box-shadow: 0 0 25px rgba(74, 26, 110, 0.9);
            white-space: nowrap;
            font-family: 'Cinzel', serif;
        }

        .dark-justiciar-title {
            font-family: 'Cinzel', serif;
            font-size: 28px;
            color: #9370db;
            text-transform: uppercase;
            margin-bottom: 8px;
            text-shadow: 3px 3px 0 #000,
                         0 0 30px rgba(147, 112, 219, 0.8);
            line-height: 1.3;
            letter-spacing: 2px;
        }

        .shadowheart-img {
            width: 100%;
            max-width: 450px;
            height: auto;
            border: 4px solid #4a1a6e;
            border-radius: 8px;
            margin: 8px auto 5px auto;
            box-shadow: 0 0 40px rgba(74, 26, 110, 0.6);
        }

        .error-code {
            font-family: 'Cinzel', serif;
            font-size: 65px;
            font-weight: bold;
            color: #9370db;
            text-shadow: 4px 4px 0 #000,
                         0 0 40px rgba(147, 112, 219, 0.9);
            margin: 5px 0;
            line-height: 1;
        }

        .error-message {
            font-size: 20px;
            font-weight: 700;
            color: #d0b0ff;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .shar-icon {
            font-size: 38px;
            margin: 3px 0;
            animation: shadow-pulse 3s ease-in-out infinite;
        }

        @keyframes shadow-pulse {
            0%, 100% {
                transform: scale(1);
                filter: brightness(1);
                opacity: 0.9;
            }
            50% {
                transform: scale(1.1);
                filter: brightness(0.7);
                opacity: 0.6;
            }
        }

        .shar-teaching {
            font-size: 22px;
            color: #d0b0ff;
            margin: 10px 0 5px 0;
            line-height: 1.4;
            font-weight: 600;
            font-style: italic;
        }

        .inner-voice {
            font-size: 16px;
            color: #a0a0c0;
            margin: 5px 0 8px 0;
            line-height: 1.5;
            font-style: italic;
            opacity: 0.7;
        }

        .inner-voice::before {
            content: '(';
            color: #707090;
        }

        .inner-voice::after {
            content: ')';
            color: #707090;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .btn {
            display: inline-block;
            padding: 14px 35px;
            font-size: 20px;
            font-weight: 900;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            border: 4px solid;
            letter-spacing: 2px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a1a6e, #2d1047);
            color: #d0b0ff;
            border-color: #2d1047;
            box-shadow: 0 8px 0 #1a0a2e,
                        0 0 30px rgba(74, 26, 110, 0.5);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5d2487, #4a1a6e);
            transform: translateY(-4px);
            box-shadow: 0 12px 0 #1a0a2e,
                        0 0 40px rgba(74, 26, 110, 0.7);
        }

        .btn-primary:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #1a0a2e,
                        0 0 20px rgba(74, 26, 110, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #b8b8d8;
            border-color: #707090;
            box-shadow: 0 8px 0 rgba(80, 80, 100, 0.5),
                        0 0 30px rgba(180, 180, 220, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(180, 180, 220, 0.15);
            transform: translateY(-4px);
            box-shadow: 0 12px 0 rgba(80, 80, 100, 0.5),
                        0 0 40px rgba(180, 180, 220, 0.4);
        }

        .btn-secondary:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 rgba(80, 80, 100, 0.5),
                        0 0 20px rgba(180, 180, 220, 0.2);
        }

        .footer-text {
            font-size: 16px;
            color: #606080;
            font-style: italic;
            margin-top: 12px;
            padding-top: 8px;
        }

        @media (max-width: 768px) {
            .dark-justiciar-title {
                font-size: 24px;
            }

            .error-code {
                font-size: 55px;
            }

            .error-message {
                font-size: 18px;
            }

            .shar-teaching {
                font-size: 20px;
            }

            .inner-voice {
                font-size: 15px;
            }

            .shar-icon {
                font-size: 34px;
            }

            .btn {
                padding: 12px 28px;
                font-size: 18px;
            }

            .shar-box {
                padding: 40px 15px 18px 15px;
            }

            .shar-box::before {
                font-size: 10px;
                padding: 7px 12px;
            }

            .shadowheart-img {
                max-width: 350px;
            }

            .footer-text {
                font-size: 14px;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="shar-box">
            <div class="dark-justiciar-title" id="dark-title">
                Embrace the Loss
            </div>

            <img src="resources/shadowheart.gif" alt="Shadowheart" class="shadowheart-img">

            <div class="shar-icon">ðŸŒ‘</div>

            <div class="error-code" id="error-code">000</div>
            <div class="error-message" id="error-message">Unknown Error</div>

            <div class="shar-teaching" id="shar-teaching">
                "Loss is a gift. Embrace the pain, for it brings clarity."
            </div>

            <div class="inner-voice" id="inner-voice">
                ...but is suffering truly the only path?
            </div>

            <div class="buttons">
                <a href="/" class="btn btn-primary">Embrace Darkness</a>
                <a href="javascript:void(0)" onclick="goBack(); return false;" class="btn btn-secondary">Seek Light</a>
            </div>

            <div class="footer-text" id="footer-text">
                Lady Shar's domain - where all is forgotten
            </div>
        </div>
    </div>

    <script>
        function goBack() {
            if (document.referrer && document.referrer !== window.location.href) {
                window.location.href = document.referrer;
            } else {
                window.location.href = '/';
            }
        }

        const errorMessages = {
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            413: "Payload Too Large",
            429: "Too Many Requests",
            500: "Internal Server Error",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout"
        };

        const darkTitles = {
            400: "Embrace the\nInvalid Request",
            401: "Embrace the\nDenied Access",
            402: "Embrace the\nDemand for Payment",
            403: "Embrace the\nForbidden Path",
            404: "Embrace the\nLoss",
            405: "Embrace the\nRejection",
            406: "Embrace the\nIncompatibility",
            408: "Embrace the\nTimeout",
            409: "Embrace the\nConflict",
            410: "Embrace the\nPermanent Loss",
            413: "Embrace the\nOverload",
            429: "Embrace the\nLimitation",
            500: "Embrace the\nSystem Failure",
            502: "Embrace the\nBroken Gateway",
            503: "Embrace the\nUnavailability",
            504: "Embrace the\nDisconnection"
        };

        const sharTeachings = {
            400: '"Your request is flawed. Loss is a gift - let go of what you sought."',
            401: '"Access denied. Pain teaches us our limits. Embrace this boundary."',
            402: '"Payment is required. Suffering has a price. Accept this truth."',
            403: '"This path is forbidden. Darkness shows us where we cannot tread."',
            404: '"The page is lost. Lady Shar teaches that all things fade to shadow."',
            405: '"Your method is rejected. Pain refines us. This denial shapes you."',
            406: '"The format is incompatible. Loss strips away what doesn\'t serve us."',
            408: '"Time has run out. Patience in darkness is a virtue. Start anew."',
            409: '"Conflict arises. Embrace the struggle - it forges Dark Justiciars."',
            410: '"Gone forever. Permanence is an illusion. All returns to the void."',
            413: '"The burden is too great. Shar teaches us to shed excess weight."',
            429: '"You ask too much. Restraint is learned through denial and pain."',
            500: '"The system has failed. Even structures must return to shadow eventually."',
            502: '"The gateway is broken. All paths eventually lead to darkness."',
            503: '"Service is unavailable. Emptiness teaches us the value of presence."',
            504: '"Connection is lost. Isolation reveals our true nature in the dark."'
        };

        const innerVoices = {
            400: '...perhaps there\'s a way to correct the request instead of abandoning it',
            401: '...what if access could be granted with the right approach?',
            402: '...is everything truly transactional? Could there be another way?',
            403: '...forbidden by whom? Who decides these boundaries?',
            404: '...but what if the page could be found? What if loss isn\'t inevitable?',
            405: '...maybe a different method would work. Why accept rejection so readily?',
            406: '...couldn\'t we find a compatible format? Is abandonment the only answer?',
            408: '...what if we tried again, faster? Must we always surrender to time?',
            409: '...conflicts can be resolved. Why embrace struggle when harmony is possible?',
            410: '...gone, but not forgotten. Does everything truly have to end?',
            413: '...what if the burden could be shared? Why must we always shed and lose?',
            429: '...but what if the need is genuine? Is denial always the answer?',
            500: '...systems can be repaired. Why accept failure as inevitable?',
            502: '...gateways can be fixed. Must all paths lead to darkness?',
            503: '...services can be restored. Is emptiness truly all there is?',
            504: '...connections can be reestablished. Is isolation really our true nature?'
        };

        const footerTexts = {
            400: "Lady Shar's domain - where all requests are forgotten",
            401: "Lady Shar's domain - where access is forever denied",
            402: "Lady Shar's domain - where all debts are paid in shadow",
            403: "Lady Shar's domain - where forbidden paths lead to darkness",
            404: "Lady Shar's domain - where all is forgotten",
            405: "Lady Shar's domain - where methods fade to nothing",
            406: "Lady Shar's domain - where incompatibility reigns",
            408: "Lady Shar's domain - where time dissolves in shadow",
            409: "Lady Shar's domain - where conflict breeds strength",
            410: "Lady Shar's domain - where all things are permanently lost",
            413: "Lady Shar's domain - where excess is shed",
            429: "Lady Shar's domain - where limits are enforced",
            500: "Lady Shar's domain - where systems collapse into void",
            502: "Lady Shar's domain - where gateways crumble",
            503: "Lady Shar's domain - where service ends in darkness",
            504: "Lady Shar's domain - where connections are severed"
        };

        // Get error code from URL path
        const path = window.location.pathname;
        const match = path.match(/\/(\d+)\.html$/);
        const errorCode = match ? parseInt(match[1]) : 404;
        const errorMessage = errorMessages[errorCode] || "Unknown Error";
        const darkTitle = darkTitles[errorCode] || "Embrace the\nLoss";
        const sharTeaching = sharTeachings[errorCode] || '"Loss is a gift. Embrace the pain, for it brings clarity."';
        const innerVoice = innerVoices[errorCode] || '...but is suffering truly the only path?';
        const footerText = footerTexts[errorCode] || "Lady Shar's domain - where all is forgotten";

        // Update page content
        document.getElementById('dark-title').innerHTML = darkTitle.replace(/\n/g, '<br>');
        document.getElementById('error-code').textContent = errorCode;
        document.getElementById('error-message').textContent = errorMessage;
        document.getElementById('shar-teaching').textContent = sharTeaching;
        document.getElementById('inner-voice').textContent = innerVoice;
        document.getElementById('footer-text').textContent = footerText;
        document.getElementById('page-title').textContent = errorCode + " - " + errorMessage;

        // Fix resource paths for internal error redirects
        const themeName = 'shadowheart-shar';
        document.querySelectorAll('img[src^="resources/"]').forEach(img => {
            img.src = '/fairer-pages/' + themeName + '/' + img.getAttribute('src');
        });

        // Create floating shadow particles
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'shadow-particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
            const size = Math.random() * 6 + 4;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            document.body.appendChild(particle);
        }
    </script>
</body>
</html>
