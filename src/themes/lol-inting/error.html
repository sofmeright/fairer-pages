<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Error</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Spiegel:wght@400;700&family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: #010a13;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #f0e6d2;
            overflow: hidden;
            position: relative;
        }

        .map-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            opacity: 0.8;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(1, 10, 19, 0.3), rgba(1, 10, 19, 0.6));
            z-index: 1;
        }

        .content-container {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 40px;
            max-width: 800px;
            width: 90%;
        }

        .error-card {
            background: linear-gradient(135deg, rgba(12, 35, 52, 0.95), rgba(18, 45, 65, 0.95));
            border: 3px solid #785a28;
            border-radius: 15px;
            padding: 50px 40px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6),
                        0 0 40px rgba(200, 170, 110, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .error-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #c89b3c, #f0e6d2, #c89b3c);
        }

        .kda-display {
            font-size: 72px;
            font-weight: 900;
            color: #e74c3c;
            margin-bottom: 15px;
            line-height: 1;
            text-shadow: 0 0 20px rgba(231, 76, 60, 0.8),
                         0 4px 10px rgba(0, 0, 0, 0.8);
            font-family: 'Roboto', sans-serif;
            letter-spacing: 3px;
        }

        .error-title {
            font-size: 32px;
            font-weight: 700;
            color: #f0e6d2;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
        }

        .flame-text {
            font-size: 18px;
            color: #c8aa6e;
            line-height: 1.7;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .status-bar {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #463714;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 25px 0;
            text-align: left;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: #a09b8c;
        }

        .status-item:last-child {
            margin-bottom: 0;
        }

        .status-label {
            color: #5b5a56;
        }

        .status-value {
            color: #f0e6d2;
            font-weight: 700;
        }

        .status-value.bad {
            color: #e74c3c;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn {
            display: inline-block;
            padding: 14px 35px;
            font-size: 15px;
            font-weight: 700;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 2px solid;
        }

        .btn-primary {
            background: linear-gradient(to bottom, #c8aa6e, #785a28);
            color: #0a1428;
            border-color: #c8aa6e;
            box-shadow: 0 4px 15px rgba(200, 170, 110, 0.4);
        }

        .btn-primary:hover {
            background: linear-gradient(to bottom, #f0e6d2, #c8aa6e);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(200, 170, 110, 0.6);
        }

        .btn-secondary {
            background: transparent;
            color: #c8aa6e;
            border-color: #785a28;
        }

        .btn-secondary:hover {
            background: rgba(120, 90, 40, 0.2);
            border-color: #c8aa6e;
            transform: translateY(-2px);
        }

        .footer-flame {
            margin-top: 25px;
            font-size: 13px;
            color: #5b5a56;
            font-style: italic;
        }

        .ping {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, rgba(231, 76, 60, 0.8), transparent);
            border-radius: 50%;
            animation: ping 2s ease-in-out infinite;
            position: absolute;
            pointer-events: none;
        }

        @keyframes ping {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }

        .surrender-vote {
            background: rgba(231, 76, 60, 0.1);
            border-left: 4px solid #e74c3c;
            padding: 12px 20px;
            margin: 20px 0;
            font-size: 14px;
            color: #e74c3c;
            text-align: left;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .error-card {
                padding: 40px 30px;
            }

            .kda-display {
                font-size: 56px;
            }

            .error-title {
                font-size: 24px;
            }

            .flame-text {
                font-size: 16px;
            }

            .btn {
                padding: 12px 28px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <img src="resources/rift.jpg" alt="Summoner's Rift" class="map-bg">
    <div class="overlay"></div>

    <div class="content-container">
        <div class="error-card">
            <div class="kda-display" id="kda-display">0/10/0</div>
            <div class="error-title" id="error-title">DEFEAT</div>
            <div class="flame-text" id="flame-text">
                Page not found. We know about your 0/10 powerspike, but this isn't it.
            </div>

            <div class="status-bar">
                <div class="status-item">
                    <span class="status-label">Status:</span>
                    <span class="status-value bad" id="status">INTING</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Jungler:</span>
                    <span class="status-value" id="jungler">MIA (as usual)</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Vision Score:</span>
                    <span class="status-value bad">0</span>
                </div>
            </div>

            <div class="surrender-vote" id="surrender-vote">
                üè≥Ô∏è Surrender vote started: FF @ 15 (4/5 voted yes)
            </div>

            <div class="buttons">
                <a href="/" class="btn btn-primary">Play Again</a>
                <a href="javascript:void(0)" onclick="goBack(); return false;" class="btn btn-secondary">Dodge</a>
            </div>

            <div class="footer-flame" id="footer-flame">
                gg ez, jg diff, report team
            </div>
        </div>
    </div>

    <script>
        function goBack() {
            // Get ref parameter from URL
            const urlParams = new URLSearchParams(window.location.search);
            const refUrl = urlParams.get('ref');

            if (refUrl && refUrl !== '/') {
                // Navigate to the referring page (before the error)
                window.location.href = decodeURIComponent(refUrl);
            } else if (window.history.length > 1) {
                // Fallback: go back in history
                window.history.back();
            } else {
                // Last resort: go to home
                window.location.href = '/';
            }
        }

        const errorMessages = {
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            413: "Payload Too Large",
            429: "Too Many Requests",
            500: "Internal Server Error",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout"
        };

        const kdas = {
            400: "0/6/0",
            401: "0/4/1",
            402: "0/7/0",
            403: "0/8/0",
            404: "0/10/0",
            405: "0/5/1",
            406: "0/6/0",
            408: "0/3/0",
            409: "1/9/0",
            410: "0/15/0",
            413: "0/12/0",
            429: "0/20/0",
            500: "0/16/2",
            502: "0/11/0",
            503: "0/7/1",
            504: "0/4/0"
        };

        const titles = {
            400: "DEFEAT",
            401: "BANNED",
            402: "NO RP",
            403: "CHAT RESTRICTED",
            404: "LOST IN JUNGLE",
            405: "WRONG LANE",
            408: "AFK",
            409: "WINTRADING",
            410: "DELETED",
            413: "FEED TOO HARD",
            429: "SPAM PINGING",
            500: "SERVER INTING",
            502: "DC'D",
            503: "SERVERS DOWN",
            504: "LAGGY"
        };

        const flames = {
            400: "Your request is as bad as your CS at 20 minutes. Maybe try again with proper syntax?",
            401: "You need to authenticate. Even Iron IV players know you gotta log in first.",
            402: "This content requires payment. Time to buy some RP or stick to free champs.",
            403: "Access denied. You've been chat restricted from this page. Maybe stop flaming?",
            404: "Page not found. We know about your 0/10 powerspike, but this isn't it. Try warding next time.",
            405: "Method not allowed. Wrong move, like taking Flash on Yuumi. Try a different approach.",
            406: "Format not acceptable. Even your team wouldn't accept this request. GG go next.",
            408: "Request timeout. Were you AFK farming jungle while the request waited? FF @ 15.",
            409: "Conflict detected. Two requests fighting over the same resource. Someone's wintrading.",
            410: "This page is gone forever. Deleted faster than your LP after promos. Lost in champ select.",
            413: "Request too large. You're sending more data than a 0/12 Yasuo feeds kills.",
            429: "Too many requests. Stop spam pinging the server. We get it, you need help. Toxic much?",
            500: "Server error. The backend is inting harder than your last ranked game. 0/16 powerspike incoming.",
            502: "Bad gateway. The connection between servers is as disconnected as your jungler from the team.",
            503: "Service unavailable. Servers are taking a break. Even they can't handle this toxicity.",
            504: "Gateway timeout. The connection is lagging worse than your 200ms ping. Jungle diff."
        };

        const statuses = {
            400: "BAD PLAY",
            401: "NOT LOGGED IN",
            402: "NO RP",
            403: "BANNED",
            404: "INTING",
            405: "WRONG MOVE",
            406: "UNRANKED",
            408: "AFK",
            409: "THROWING",
            410: "RAGE QUIT",
            413: "FEEDING",
            429: "SPAM PINGING",
            500: "SERVER INT",
            502: "DC'D",
            503: "MAINTENANCE",
            504: "LAGGING"
        };

        const junglers = {
            400: "Top side only",
            401: "Need smite unlock",
            402: "Can't afford",
            403: "Perma banned",
            404: "MIA (as usual)",
            405: "Wrong path",
            406: "Not ganking",
            408: "AFK farming",
            409: "Griefing",
            410: "Rage quit",
            413: "Overfed enemy",
            429: "Spam ganking",
            500: "Crashed",
            502: "Disconnected",
            503: "On break",
            504: "Too slow"
        };

        const surrenders = {
            400: "üè≥Ô∏è FF @ 15: Bad request comp (4/5 voted yes)",
            401: "üè≥Ô∏è FF @ 15: Can't win without login (5/5 voted yes)",
            402: "üè≥Ô∏è FF @ 15: No RP for boost (3/5 voted yes)",
            403: "üè≥Ô∏è FF @ 15: Banned from winning (4/5 voted yes)",
            404: "üè≥Ô∏è FF @ 15: Lost in champ select (4/5 voted yes)",
            405: "üè≥Ô∏è FF @ 15: Wrong build path (3/5 voted yes)",
            406: "üè≥Ô∏è FF @ 15: Unacceptable comp (4/5 voted yes)",
            408: "üè≥Ô∏è FF @ 15: Too slow, game over (5/5 voted yes)",
            409: "üè≥Ô∏è FF @ 15: Someone's throwing (4/5 voted yes)",
            410: "üè≥Ô∏è FF @ 15: Already deleted (5/5 voted yes)",
            413: "üè≥Ô∏è FF @ 15: Fed enemy too hard (5/5 voted yes)",
            429: "üè≥Ô∏è FF @ 15: Too many pings (4/5 voted yes)",
            500: "üè≥Ô∏è FF @ 15: Server diff (5/5 voted yes)",
            502: "üè≥Ô∏è FF @ 15: Connection lost (4/5 voted yes)",
            503: "üè≥Ô∏è FF @ 15: Service diff (5/5 voted yes)",
            504: "üè≥Ô∏è FF @ 15: Lag diff (4/5 voted yes)"
        };

        const footerFlames = {
            400: "gg ez, report request",
            401: "bg, login diff",
            402: "skin diff, gg",
            403: "toxic player, report",
            404: "gg ez, jg diff, report team",
            405: "method gap, uninstall",
            406: "format diff, go next",
            408: "afk diff, report",
            409: "wintrading detected",
            410: "rage quit gg",
            413: "feed diff, too heavy",
            429: "spam = ban, deserved",
            500: "server diff, riot pls",
            502: "connection gap, unplayable",
            503: "maintenance diff, 0 pr, dogwater!",
            504: "ping diff, riot pls fix"
        };

        // Get error code from URL path
        const path = window.location.pathname;
        const match = path.match(/\/(\d+)\.html$/);
        const errorCode = match ? parseInt(match[1]) : 404;
        const errorMessage = errorMessages[errorCode] || "Unknown Error";
        const kda = kdas[errorCode] || "0/10/0";
        const title = titles[errorCode] || "DEFEAT";
        const flame = flames[errorCode] || "An error occurred. Your team diff.";
        const status = statuses[errorCode] || "INTING";
        const jungler = junglers[errorCode] || "MIA";
        const surrender = surrenders[errorCode] || "üè≥Ô∏è FF @ 15 (4/5 voted yes)";
        const footerFlame = footerFlames[errorCode] || "gg, go next";

        // Update page content
        document.getElementById('kda-display').textContent = kda;
        document.getElementById('error-title').textContent = title;
        document.getElementById('flame-text').textContent = flame;
        document.getElementById('status').textContent = status;
        document.getElementById('jungler').textContent = jungler;
        document.getElementById('surrender-vote').textContent = surrender;
        document.getElementById('footer-flame').textContent = footerFlame;
        document.getElementById('page-title').textContent = errorCode + " - " + errorMessage;

        // Fix resource paths for internal error redirects
        const themeName = 'lol-inting';
        document.querySelectorAll('img[src^="resources/"]').forEach(img => {
            img.src = '/fairer-pages/' + themeName + '/' + img.getAttribute('src');
        });

        // Create random ping effects
        function createPing() {
            const ping = document.createElement('div');
            ping.classList.add('ping');
            ping.style.left = Math.random() * 100 + '%';
            ping.style.top = Math.random() * 100 + '%';
            document.body.appendChild(ping);

            setTimeout(() => {
                ping.remove();
            }, 2000);
        }

        // Occasional pings for that authentic LoL experience
        setInterval(createPing, 3000);
    </script>
</body>
</html>
