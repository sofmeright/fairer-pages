<!DOCTYPE html>
<html lang="en">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Error</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1a1f35 0%, #2d3548 50%, #1a1f35 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            overflow-x: hidden;
            overflow-y: hidden;
            position: relative;
        }

        /* Searchlight effect */
        @keyframes searchlight {
            0% { transform: translateX(-200%) rotate(45deg); }
            100% { transform: translateX(200%) rotate(45deg); }
        }

        .searchlight {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 100%;
            height: 200%;
            background: linear-gradient(90deg, transparent, rgba(255, 230, 109, 0.1), transparent);
            animation: searchlight 8s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        .error-container {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 15px;
            max-width: 900px;
            width: 95%;
            max-height: 95vh;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .watch-box {
            background: rgba(30, 35, 50, 0.95);
            border: 4px solid #ff9900;
            border-radius: 8px;
            padding: 50px 20px 18px 20px;
            box-shadow: 0 0 60px rgba(255, 153, 0, 0.4),
                        inset 0 0 40px rgba(0, 0, 0, 0.8),
                        0 0 100px rgba(255, 153, 0, 0.2);
            position: relative;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .watch-box::before {
            content: 'ðŸ‘® NEIGHBORHOOD WATCH ðŸ‘®';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff9900, #ffaa00);
            color: #000;
            padding: 8px 18px;
            font-weight: 900;
            font-size: 12px;
            letter-spacing: 3px;
            border: 3px solid #ff7700;
            border-radius: 5px;
            box-shadow: 0 0 25px rgba(255, 153, 0, 0.9);
            white-space: nowrap;
            font-family: 'Bebas Neue', cursive;
        }

        .title {
            font-family: 'Bebas Neue', cursive;
            font-size: 26px;
            color: #ff9900;
            text-transform: uppercase;
            margin-bottom: 8px;
            text-shadow: 3px 3px 0 #000,
                         0 0 30px rgba(255, 153, 0, 0.8);
            line-height: 1.2;
            letter-spacing: 2px;
        }

        .watch-img {
            width: 100%;
            max-width: 550px;
            height: auto;
            border: 4px solid #ff9900;
            border-radius: 8px;
            margin: 8px auto 8px auto;
            box-shadow: 0 0 40px rgba(255, 153, 0, 0.5);
        }

        .error-code {
            font-family: 'Bebas Neue', cursive;
            font-size: 70px;
            font-weight: bold;
            color: #ff4444;
            text-shadow: 4px 4px 0 #000,
                         0 0 40px rgba(255, 68, 68, 0.9);
            margin: 8px 0;
            line-height: 1;
        }

        .error-message {
            font-size: 20px;
            font-weight: 700;
            color: #ffaa00;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .shrug {
            font-size: 40px;
            margin: 5px 0;
        }

        .news-box {
            background: rgba(40, 45, 60, 0.8);
            border: 3px solid #4a9eff;
            border-radius: 8px;
            padding: 15px;
            margin: 10px auto;
            max-width: 650px;
            text-align: left;
        }

        .good-news {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid #4caf50;
            border-radius: 4px;
        }

        .bad-news {
            padding: 10px;
            background: rgba(244, 67, 54, 0.2);
            border-left: 4px solid #f44336;
            border-radius: 4px;
        }

        .news-label {
            font-family: 'Bebas Neue', cursive;
            font-size: 18px;
            font-weight: 900;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .good-news .news-label {
            color: #66ff66;
        }

        .bad-news .news-label {
            color: #ff6666;
        }

        .news-text {
            font-size: 15px;
            color: #fff;
            line-height: 1.5;
            font-weight: 600;
        }

        .watch-report {
            background: rgba(255, 153, 0, 0.1);
            border-left: 4px solid #ff9900;
            padding: 12px 15px;
            margin: 10px auto;
            max-width: 650px;
            text-align: left;
            border-radius: 4px;
        }

        .report-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 16px;
            color: #ff9900;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .report-text {
            font-size: 15px;
            color: #fff;
            line-height: 1.5;
            font-weight: 600;
        }

        .alien-tech {
            font-size: 15px;
            color: #4a9eff;
            margin: 8px 0;
            font-style: italic;
            font-weight: 600;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .btn {
            display: inline-block;
            padding: 14px 35px;
            font-size: 18px;
            font-weight: 900;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: 'Bebas Neue', cursive;
            text-transform: uppercase;
            border: 4px solid;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff9900, #ffaa00);
            color: #000;
            border-color: #ff7700;
            box-shadow: 0 8px 0 #cc6600,
                        0 0 30px rgba(255, 153, 0, 0.5);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ffaa00, #ffbb00);
            transform: translateY(-4px);
            box-shadow: 0 12px 0 #cc6600,
                        0 0 40px rgba(255, 153, 0, 0.7);
        }

        .btn-primary:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #cc6600,
                        0 0 20px rgba(255, 153, 0, 0.4);
        }

        .btn-secondary {
            background: rgba(74, 158, 255, 0.2);
            color: #4a9eff;
            border-color: #4a9eff;
            box-shadow: 0 8px 0 rgba(74, 158, 255, 0.4),
                        0 0 30px rgba(74, 158, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(74, 158, 255, 0.3);
            color: #6ab0ff;
            transform: translateY(-4px);
            box-shadow: 0 12px 0 rgba(74, 158, 255, 0.4),
                        0 0 40px rgba(74, 158, 255, 0.4);
        }

        .btn-secondary:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 rgba(74, 158, 255, 0.4),
                        0 0 20px rgba(74, 158, 255, 0.3);
        }

        .footer-text {
            font-size: 14px;
            color: #8899aa;
            font-style: italic;
            margin-top: 10px;
            padding-top: 8px;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 22px;
            }

            .error-code {
                font-size: 60px;
            }

            .error-message {
                font-size: 18px;
            }

            .shrug {
                font-size: 35px;
            }

            .news-box {
                padding: 12px;
                max-width: 100%;
            }

            .news-label {
                font-size: 16px;
            }

            .news-text {
                font-size: 14px;
            }

            .watch-report {
                padding: 10px 12px;
                max-width: 100%;
            }

            .report-title {
                font-size: 14px;
            }

            .report-text {
                font-size: 14px;
            }

            .alien-tech {
                font-size: 14px;
            }

            .btn {
                padding: 12px 28px;
                font-size: 16px;
            }

            .watch-box {
                padding: 45px 15px 15px 15px;
            }

            .watch-box::before {
                font-size: 10px;
                padding: 7px 12px;
            }

            .watch-img {
                max-width: 100%;
            }

            .footer-text {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="searchlight"></div>

    <div class="error-container">
        <div class="watch-box">
            <div class="title" id="title">
                We Found The Problem!
            </div>

            <img src="resources/thewatch.jpg" alt="The Watch" class="watch-img">

            <div class="shrug">ðŸ¤·</div>

            <div class="error-code" id="error-code">000</div>
            <div class="error-message" id="error-message">Unknown Error</div>

            <div class="news-box">
                <div class="good-news">
                    <div class="news-label">âœ“ THE GOOD NEWS:</div>
                    <div class="news-text" id="good-news-text">
                        We identified the threat and took immediate action!
                    </div>
                </div>
                <div class="bad-news">
                    <div class="news-label">âœ— THE BAD NEWS:</div>
                    <div class="news-text" id="bad-news-text">
                        We may have destroyed everything in the process...
                    </div>
                </div>
            </div>

            <div class="watch-report">
                <div class="report-title">NEIGHBORHOOD WATCH INCIDENT REPORT:</div>
                <div class="report-text" id="report-text">
                    The Watch team responded to suspicious activity in your request. We did what we had to do. Sorry about your server.
                </div>
            </div>

            <div class="alien-tech" id="alien-tech">
                ðŸ›¸ Alien technology detected: Error orb is glowing red
            </div>

            <div class="buttons">
                <a href="/" class="btn btn-primary">Return to Costco</a>
                <a href="javascript:void(0)" onclick="goBack(); return false;" class="btn btn-secondary">Call Another Meeting</a>
            </div>

            <div class="footer-text" id="footer-text">
                We're just suburban dads. We're not qualified for this.
            </div>
        </div>
    </div>

    <script>
        function goBack() {
            const nav = (window.self !== window.top) ? window.top : window;
            const urlParams = new URLSearchParams(window.location.search);
            const refUrl = urlParams.get('ref');

            if (refUrl && refUrl !== '/') {
                nav.location.href = decodeURIComponent(refUrl);
            } else if (nav.history.length > 1) {
                nav.history.back();
            } else {
                nav.location.href = '/';
            }
        }

        const errorMessages = {
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            413: "Payload Too Large",
            429: "Too Many Requests",
            500: "Internal Server Error",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout"
        };

        const titles = {
            400: "We Found The Problem!",
            401: "We Found A Security Issue!",
            402: "We Found A Payment Problem!",
            403: "We Found Restricted Access!",
            404: "We Found... Nothing!",
            405: "We Found The Wrong Method!",
            406: "We Found A Format Issue!",
            408: "We Took Too Long!",
            409: "We Found A Conflict!",
            410: "We Found It's Gone Forever!",
            413: "We Found Too Much Data!",
            429: "We're Being Overwhelmed!",
            500: "We Broke Something!",
            502: "We Lost The Gateway!",
            503: "We Shut It Down!",
            504: "We're Still Waiting!"
        };

        const goodNews = {
            400: "We intercepted your malformed request before it caused more damage!",
            401: "We detected the unauthorized access attempt immediately!",
            402: "We identified that payment is required for this resource!",
            403: "We successfully blocked unauthorized access to protected areas!",
            404: "We thoroughly searched the entire neighborhood for that page!",
            405: "We identified the invalid method being used!",
            406: "We detected the format incompatibility right away!",
            408: "We monitored the request timeout and documented it!",
            409: "We identified the conflict between your request and the server!",
            410: "We confirmed the page is completely gone - no alien involvement!",
            413: "We stopped the oversized payload before it got through!",
            429: "We noticed you're sending too many requests and intervened!",
            500: "We identified a critical server malfunction!",
            502: "We detected the gateway failure immediately!",
            503: "We discovered the service is offline before you wasted time!",
            504: "We're monitoring the gateway timeout situation!"
        };

        const badNews = {
            400: "In the process of stopping it, we may have destroyed your entire request... and the server's ability to understand any requests.",
            401: "While securing the perimeter, we accidentally locked everyone out. Including you. And us. And the admin.",
            402: "We broke the payment system while investigating. Now nobody can pay for anything. Costco's payment terminals are down too.",
            403: "We were so thorough with security that we blocked everything. The site, the database, even the parking lot.",
            404: "We searched so aggressively we deleted half the server trying to find it. It definitely doesn't exist now.",
            405: "We destroyed all the methods while testing. GET, POST, DELETE... all gone. The site only accepts interpretive dance now.",
            406: "We crashed the format converter. Now everything is in alien binary. Even our incident report.",
            408: "We got impatient and blew up the connection. With an alien weapon. Sorry about the server room.",
            409: "We resolved the conflict by destroying both sides of the argument. And the database. Conflict resolved! ðŸŽ‰",
            410: "We were checking if it was really gone and accidentally deleted the backups too. And the backup server. It's definitely gone now.",
            413: "We tried to compress it with alien technology. Now it's too small. Like, atomic level small. We can't find it anymore.",
            429: "We stopped your requests by destroying the rate limiter. And the server. And the network. No more request problems!",
            500: "Turns out WE caused the server error while investigating. We touched something we shouldn't have. The alien orb was involved.",
            502: "We tried to fix the gateway with our alien tech. The gateway is now in another dimension. Good news: no more errors there!",
            503: "It was offline for maintenance. We didn't know that. We thought it was aliens. We defended it. It's still offline. More offline now.",
            504: "The gateway timed out while we were examining it. We may have shot it with the alien weapon. Gateway is no longer timing out. It's not doing anything."
        };

        const reports = {
            400: "Watch member noticed suspicious syntax in request. Took defensive action with alien technology. Request neutralized. Syntax parser also neutralized. Grammar rules may be casualties.",
            401: "Watch patrol identified unauthorized individual. Applied alien security protocols. Individual blocked. All individuals now blocked. Nobody can access anything. Security achieved.",
            402: "Team investigated payment anomaly at digital Costco. Payment processing terminated with extreme prejudice. All e-commerce now free. You're welcome.",
            403: "Watch responded to forbidden access attempt. Created additional forbidden zones. Everything is now forbidden. Including this error page. Wait, how are you reading this?",
            404: "Extensive neighborhood search conducted for missing page. Search area expanded to entire server. Page still missing. Server also missing. Watch members may have overreacted with alien weaponry.",
            405: "Watch identified improper method usage. Confiscated all methods for evidence. Accidentally destroyed methods in evidence locker explosion. Alien orb was unstable.",
            406: "Format investigation revealed incompatibility. Applied universal alien format converter. Everything is now in alien language. Including our meeting notes.",
            408: "Watch waited for request to complete. Got bored. Blew up timeout mechanism. Time itself may be compromised in server vicinity.",
            409: "Conflict resolution team deployed. Used alien peace protocol. Both sides of conflict eliminated. Problem solved. Collateral damage: yes.",
            410: "Confirmed permanent deletion. Re-confirmed with alien scanner. Accidentally vaporized backup drives during scanning. It's super gone now.",
            413: "Large payload intercepted. Applied alien compression beam. Payload compressed beyond recognition. May have compressed surrounding data. And the server rack.",
            429: "Excessive requests detected. Initiated emergency shutdown protocols. Shut down requests. Shut down server. Shut down entire data center. Area now peaceful.",
            500: "Server malfunction discovered. Watch attempted repair with alien technology. Server now more malfunctioned. But different. Progress?",
            502: "Gateway issue identified. Gateway replaced with alien gateway. Alien gateway incompatible with Earth internet. Should have read manual first.",
            503: "Service offline detected. Watch secured area. Service remains offline. Also added laser perimeter. Service very secure. And very offline.",
            504: "Gateway timeout monitored. Watch fired warning shot at gateway. Gateway stopped timing out. Gateway stopped everything. Went too far?"
        };

        const alienTech = {
            400: "ðŸ›¸ Alien orb analysis: Syntax destroyer active. Oops.",
            401: "ðŸ›¸ Alien orb analysis: Security field set to MAXIMUM. Can't turn it off.",
            402: "ðŸ›¸ Alien orb analysis: Economy destroyer mode engaged. All money is now worthless.",
            403: "ðŸ›¸ Alien orb analysis: Access blocker running at 200%. Everything forbidden.",
            404: "ðŸ›¸ Alien orb analysis: Matter disintegrator was NOT supposed to be used indoors.",
            405: "ðŸ›¸ Alien orb analysis: Method eliminator successful. Too successful.",
            406: "ðŸ›¸ Alien orb analysis: Universal translator malfunction. Translated everything to alien.",
            408: "ðŸ›¸ Alien orb analysis: Time distortion field active. That's why everything timed out.",
            409: "ðŸ›¸ Alien orb analysis: Conflict resolution beam set to 'OBLITERATE'. Our bad.",
            410: "ðŸ›¸ Alien orb analysis: Permanent deletion ray works really well. Maybe too well.",
            413: "ðŸ›¸ Alien orb analysis: Compression beam stuck on 'EXTREME'. Data now microscopic.",
            429: "ðŸ›¸ Alien orb analysis: Request suppressor overloaded. Suppressed all requests. Forever.",
            500: "ðŸ›¸ Alien orb analysis: Repair mode failed. Made it worse. Significantly worse.",
            502: "ðŸ›¸ Alien orb analysis: Gateway replacement protocol failed. Gateway is now an alien.",
            503: "ðŸ›¸ Alien orb analysis: Lockdown protocol engaged. Can't disengage. Lost the manual.",
            504: "ðŸ›¸ Alien orb analysis: Patience module missing. Destroyed gateway prematurely."
        };

        const footerTexts = {
            400: "We meet at Costco every Tuesday. Sorry about your syntax.",
            401: "We're neighborhood watch. We watch EVERYTHING. Even your credentials.",
            402: "At least at Costco, the prices are always good. Unlike your payment status.",
            403: "We may have set the alien security too high. Can't remember how to lower it.",
            404: "We're not qualified for this. We just wanted to investigate a suspicious incident at Costco.",
            405: "We're just suburban dads who found an alien orb. This got out of hand.",
            406: "We should have left the alien technology alone. Hindsight is 20/20.",
            408: "We're impatient suburban dads. Waiting isn't our strong suit. Neither is alien tech.",
            409: "We solve neighborhood disputes. This got more explosive than usual.",
            410: "At least when we delete something, we're thorough. Like, REALLY thorough.",
            413: "The alien orb seemed like it would help. It did not help.",
            429: "We thought you were an alien invasion force. Our bad. Multiple requests = attack?",
            500: "We broke it. We fixed it. We broke it worse. We're not IT professionals.",
            502: "We replaced your gateway with alien technology. It seemed smart at the time.",
            503: "We secured the service. It's so secure it doesn't work anymore. Mission accomplished?",
            504: "Next time we'll be more patient. Probably. No promises."
        };

        // Get error code from URL path
        const path = window.location.pathname;
        const match = path.match(/\/(\d+)\.html$/);
        const errorCode = match ? parseInt(match[1]) : 404;
        const errorMessage = errorMessages[errorCode] || "Unknown Error";
        const title = titles[errorCode] || "We Found The Problem!";
        const goodNewsText = goodNews[errorCode] || "We identified the threat and took immediate action!";
        const badNewsText = badNews[errorCode] || "We may have destroyed everything in the process...";
        const report = reports[errorCode] || "The Watch team responded to suspicious activity in your request. We did what we had to do. Sorry about your server.";
        const alienTechText = alienTech[errorCode] || "ðŸ›¸ Alien technology detected: Error orb is glowing red";
        const footerText = footerTexts[errorCode] || "We're just suburban dads. We're not qualified for this.";

        // Update page content
        document.getElementById('title').textContent = title;
        document.getElementById('error-code').textContent = errorCode;
        document.getElementById('error-message').textContent = errorMessage;
        document.getElementById('good-news-text').textContent = goodNewsText;
        document.getElementById('bad-news-text').textContent = badNewsText;
        document.getElementById('report-text').textContent = report;
        document.getElementById('alien-tech').textContent = alienTechText;
        document.getElementById('footer-text').textContent = footerText;
        document.getElementById('page-title').textContent = errorCode + " - " + errorMessage;

        // Fix resource paths for internal error redirects
        const themeName = 'neighborhood-watch';
        document.querySelectorAll('img[src^="resources/"]').forEach(img => {
            img.src = '/fairer-pages/' + themeName + '/' + img.getAttribute('src');
        });
    </script>
</body>
</html>
