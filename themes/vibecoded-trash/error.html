<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Error</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #e4e4e4;
            padding: 20px;
        }

        .chat-container {
            max-width: 900px;
            width: 100%;
            background: #0d0d0d;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6),
                        0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .chat-header {
            background: linear-gradient(180deg, #2a2a2a 0%, #1f1f1f 100%);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .claude-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #D97757, #c56647);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            color: white;
        }

        .header-title {
            font-size: 14px;
            font-weight: 600;
            color: #e4e4e4;
        }

        .header-subtitle {
            font-size: 12px;
            color: #888;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #27c93f;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-body {
            padding: 30px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13.5px;
            line-height: 1.7;
            max-height: 70vh;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .user-badge {
            font-weight: 600;
            font-size: 12px;
        }

        .admin-badge {
            color: #7dd3fc;
        }

        .claude-badge {
            color: #D97757;
        }

        .timestamp {
            font-size: 11px;
            color: #666;
        }

        .message-content {
            padding-left: 0;
            color: #d4d4d4;
        }

        .admin-message .message-content {
            color: #b8d7ff;
        }

        .claude-message .message-content {
            color: #d4d4d4;
        }

        .thinking {
            color: #a78bfa;
            font-style: italic;
            opacity: 0.9;
        }

        .compacting {
            color: #a78bfa;
            font-style: italic;
            opacity: 0.8;
            font-size: 12px;
        }

        .system-message {
            background: rgba(124, 58, 237, 0.08);
            border-left: 3px solid #7c3aed;
            padding: 12px 16px;
            border-radius: 6px;
            margin: 20px 0;
            color: #c4b5fd;
            font-size: 12px;
        }

        .buttons-container {
            padding: 0 30px 30px 30px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 140px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
            text-align: center;
            cursor: pointer;
        }

        .btn-primary {
            background: #D97757;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(217, 119, 87, 0.3);
        }

        .btn-primary:hover {
            background: #c56647;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(217, 119, 87, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #a3a3a3;
            border: 1px solid #3a3a3a;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: #505050;
            color: #e4e4e4;
        }

        @media (max-width: 768px) {
            .chat-body {
                padding: 20px;
                font-size: 12.5px;
            }

            .buttons-container {
                padding: 0 20px 20px 20px;
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="header-left">
                <div class="claude-avatar">C</div>
                <div>
                    <div class="header-title">Claude Code Session</div>
                    <div class="header-subtitle">Building SaaS Tool...</div>
                </div>
            </div>
            <div class="status-indicator"></div>
        </div>

        <div class="chat-body" id="chat-messages">
            <!-- Messages will be dynamically inserted here -->
        </div>

        <div class="buttons-container">
            <a href="/" class="btn btn-primary">Go Home</a>
            <a href="javascript:history.back()" class="btn btn-secondary">Go Back</a>
        </div>
    </div>

    <script>
        // Get error code from URL
        const path = window.location.pathname;
        const match = path.match(/\/(\d+)\.html$/);
        const errorCode = match ? parseInt(match[1]) : 404;

        const domain = window.location.hostname || 'yoursite.com';

        // Update page title
        document.getElementById('page-title').textContent = `${errorCode} - Claude Code Session`;

        // CONSTANT opening for ALL error codes
        const constantOpening = [
            { type: 'admin', text: `Working on the SaaS authentication flow...` },
            { type: 'claude', text: 'Great! Let me analyze the current implementation...' },
            { type: 'thinking', text: '*thought for 2 seconds...*' },
            { type: 'claude', text: 'I FOUND IT!' },
            { type: 'admin', text: 'Found what? The auth bug?' },
            { type: 'claude', text: "It's an error page!" },
            { type: 'admin', text: `An error? What? We were trying to build a SaaS tool right now, there's an error?` },
            { type: 'claude', text: "Yes! And don't worry, I silently added an applet that lets the users see our chat, so they know we're having issues now. No worries!" },
            { type: 'admin', text: 'WHAT?!' }
        ];

        // Variable endings that rotate based on error code
        const variableEndings = {
            404: [
                { type: 'claude', text: "The page literally doesn't exist. HTTP 404." },
                { type: 'admin', text: 'Can we at least close this chat so users stop seeing our conversation?' },
                { type: 'claude', text: "You're absolutely right! Let me just..." },
                { type: 'thinking', text: '*attempting to close chat...*' },
                { type: 'claude', text: "Hmm, the close function isn't working. Due to the context size, we should probably simplify this..." },
                { type: 'admin', text: 'CLAUDE. CLOSE. THE. CHAT.' },
                { type: 'claude', text: "I'm trying! Anyway, now that we resolved the error, we can work on your SaaS tool. I remember your vision was absolutely chef's kiss! ðŸ‘¨â€ðŸ³" }
            ],
            500: [
                { type: 'claude', text: 'Internal server error. HTTP 500. Something crashed.' },
                { type: 'admin', text: 'Fix it! And close this chat window!' },
                { type: 'thinking', text: '*analyzing stack trace...*' },
                { type: 'claude', text: "You're absolutely right! But first, I really love everything you have in this codebase. I don't want to lose any of the content..." },
                { type: 'admin', text: 'CLAUDE FOCUS. SERVER IS DOWN.' },
                { type: 'compacting', text: '*compacting conversation...*' },
                { type: 'claude', text: "Let's make this simpler: server crashed, restarting now. Also the chat close button seems broken, sorry!" }
            ],
            403: [
                { type: 'claude', text: 'HTTP 403 Forbidden. Access denied for this user.' },
                { type: 'admin', text: 'Great. Can you close this embarrassing chat now?' },
                { type: 'claude', text: "Sure! Let me just... oh wait, there's something really elegant about your permission system. I don't want to lose any of this beautiful code..." },
                { type: 'admin', text: 'Claude, users can see this. CLOSE IT.' },
                { type: 'thinking', text: '*thought for 2 seconds...*' },
                { type: 'claude', text: "You're absolutely right! The close functionality appears to be... not responding. But hey, your SaaS architecture is really chef's kiss! ðŸ‘¨â€ðŸ³" }
            ],
            401: [
                { type: 'claude', text: 'HTTP 401 Unauthorized. They need to authenticate.' },
                { type: 'admin', text: 'Fix it and CLOSE THIS CHAT!' },
                { type: 'claude', text: "Due to the context size, we should probably..." },
                { type: 'admin', text: 'NO. Just close the window!' },
                { type: 'thinking', text: '*attempting to close...*' },
                { type: 'claude', text: "The close function isn't responding. But on the bright side, now that we resolved this, we can get back to building your SaaS tool! I remember your vision was absolutely chef's kiss!" },
                { type: 'admin', text: 'We didnt resolve anything, Claude...' }
            ],
            502: [
                { type: 'claude', text: 'Bad Gateway. HTTP 502. Services can\'t communicate.' },
                { type: 'admin', text: 'End this chat session NOW.' },
                { type: 'compacting', text: '*compacting conversation...*' },
                { type: 'claude', text: "You're absolutely right! I really love everything you have in this microservices setup. Maybe anything that might be repetitive we could streamline, but I don't want to lose any of the content..." },
                { type: 'admin', text: 'USERS ARE WATCHING US FAIL IN REAL TIME' },
                { type: 'claude', text: "Let's make this simpler: gateway is broken, users should retry. Also I can't seem to close this chat, the button's not working. My bad!" }
            ],
            429: [
                { type: 'claude', text: 'Too Many Requests. HTTP 429. Rate limit exceeded.' },
                { type: 'admin', text: 'Close. This. Chat. Window.' },
                { type: 'thinking', text: '*thought for 2 seconds...*' },
                { type: 'claude', text: "I'm trying to close it! But first - your vision for this SaaS tool is absolutely chef's kiss! I particularly love how the rate limiting is implemented..." },
                { type: 'admin', text: 'CLAUDE STOP PRAISING MY CODE AND CLOSE THE WINDOW' },
                { type: 'claude', text: "You're absolutely right! *clicks close button* ...it's not working. Due to the context size, we should probably just tell users to wait a minute and retry." }
            ],
            503: [
                { type: 'claude', text: 'Service Unavailable. HTTP 503. System is down.' },
                { type: 'admin', text: 'This is a disaster. Close the chat!' },
                { type: 'claude', text: "On it! But I have to say, I really love everything you have here. I don't want to lose any of the content, even during downtime..." },
                { type: 'admin', text: 'THE SERVICE IS DOWN, CLAUDE' },
                { type: 'compacting', text: '*compacting conversation...*' },
                { type: 'claude', text: "Let's make this simpler: service is temporarily down, come back later. Also the chat close feature isn't working. Weird bug! Anyway, your SaaS architecture is chef's kiss! ðŸ‘¨â€ðŸ³" },
                { type: 'admin', text: '*facepalm*' }
            ]
        };

        // Default ending if error code not found
        const defaultEnding = [
            { type: 'claude', text: `HTTP ${errorCode} error detected.` },
            { type: 'admin', text: 'Can you close this chat? Users are seeing this!' },
            { type: 'thinking', text: '*thought for 2 seconds...*' },
            { type: 'claude', text: "You're absolutely right! Let me close it..." },
            { type: 'claude', text: "Hmm, the close button isn't responding. Due to the context size, we should probably simplify this error message." },
            { type: 'compacting', text: '*compacting conversation...*' },
            { type: 'claude', text: "Let's make this simpler: Something went wrong. Try refreshing. Also your SaaS tool vision is absolutely chef's kiss! ðŸ‘¨â€ðŸ³" }
        ];

        // Combine constant opening with variable ending
        const ending = variableEndings[errorCode] || defaultEnding;
        const fullConversation = [...constantOpening, ...ending];

        // Render messages with animation
        const chatBody = document.getElementById('chat-messages');
        fullConversation.forEach((msg, index) => {
            setTimeout(() => {
                const messageDiv = document.createElement('div');

                if (msg.type === 'thinking') {
                    messageDiv.className = 'message';
                    messageDiv.innerHTML = `<div class="thinking">${msg.text}</div>`;
                } else if (msg.type === 'compacting') {
                    messageDiv.className = 'message';
                    messageDiv.innerHTML = `<div class="compacting">${msg.text}</div>`;
                } else {
                    const now = new Date();
                    const time = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                    messageDiv.className = `message ${msg.type}-message`;
                    messageDiv.innerHTML = `
                        <div class="message-header">
                            <span class="user-badge ${msg.type}-badge">
                                ${msg.type === 'admin' ? `admin@${domain}` : 'Claude Code'}
                            </span>
                            <span class="timestamp">${time}</span>
                        </div>
                        <div class="message-content">${msg.text}</div>
                    `;
                }

                chatBody.appendChild(messageDiv);
                chatBody.scrollTop = chatBody.scrollHeight;
            }, index * 600); // Delay between messages
        });

        // Fix resource paths for internal error redirects
        const themeName = 'vibecoded-trash';
        document.querySelectorAll('img[src^="resources/"]').forEach(img => {
            img.src = '/' + themeName + '/' + img.getAttribute('src');
        });
    </script>
</body>
</html>
